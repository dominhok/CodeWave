<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>긴급 대피 경로</title>
    <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=w5mst5owqn&submodules=geocoder"></script>
    <style>
        /* 기존 CSS 그대로 유지 */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; }
        body { background-color: #f8f9fa; color: #343a40; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 20px; padding: 20px; background: rgba(0, 122, 255, 0.1); border-radius: 12px; border: 1px solid rgba(0, 122, 255, 0.2); }
        .header h1 { font-size: 2.2em; color: #007AFF; margin-bottom: 10px; font-weight: 700; letter-spacing: -0.5px; }
        .header p { color: #666; font-size: 1.1em; font-weight: 500; margin-bottom: 0; line-height: 1.4; }
        .header p strong { color: #007AFF; font-weight: 600; }
        .emergency-info { display: flex; justify-content: center; gap: 20px; margin-top: 10px; font-size: 1em; color: #555; }
        .emergency-info span { display: flex; align-items: center; gap: 5px; }
        #map { width: 100%; height: 500px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); border: 1px solid #e9ecef; }
        .info-window { padding: 10px 16px; font-size: 15px; color: #343a40; background: white; border-radius: 8px; font-weight: 600; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); border: 1px solid #e9ecef; }
        #goBtn { display: none; width: 100%; padding: 18px 20px; font-size: 1.3em; color: white; background-color: #007AFF; border: none; border-radius: 12px; cursor: pointer; text-decoration: none; text-align: center; transition: all 0.3s; margin-top: 20px; box-shadow: 0 4px 10px rgba(0, 122, 255, 0.2); font-weight: 700; animation: pulse 2s infinite; }
        #goBtn:hover { background-color: #0056b3; transform: translateY(-2px); }
        .status { margin-top: 20px; padding: 18px; background: white; border-radius: 8px; font-size: 1.1em; color: #666; border: 1px solid #e9ecef; font-weight: 500; }
        .emergency-alert { background: #007AFF; color: white; padding: 14px 20px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 1.1em; box-shadow: 0 4px 10px rgba(0, 122, 255, 0.2); letter-spacing: -0.3px; }
        .emergency-alert span { margin-right: 12px; font-size: 1.2em; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        @media (max-width: 768px) {
            body { padding: 10px; }
            .header h1 { font-size: 2em; }
            #map { height: 50vh; }
            #goBtn { font-size: 1.2em; padding: 16px 20px; }
            .emergency-alert { font-size: 1em; padding: 14px 20px; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>🚨 긴급 대피 경로</h1>
        <p><strong id="disaster-location">서울시 강남구</strong>에서 <strong id="disaster-type">지진</strong>이 발생했습니다.<br></p>
        <div class="emergency-info">
            <span>🕒 <span id="current-time">--:--</span></span>
            <span>📍 현 위치와의 거리: <span id="disaster-distance">3.7km</span></span>
        </div>
    </div>
    <div class="emergency-alert">
        <span>⚡ 현재 위치에서 안전한 대피소까지 경로를 안내합니다</span>
    </div>
    <div id="map"></div>
    <a id="goBtn" href="#" target="_blank">
        👣‍♂️ Shelter Route Navigation
    </a>
    <div class="status">
        ✨ Emergency Call button
    </div>
</div>
<script>
    const disasterInfo = {
        location: '서울시 강남구',
        type: '지진',
        distance: '3.7km',
        coordinates: { lat: 37.498095, lng: 127.027610 },
        radius: 5000
    };

    document.getElementById('disaster-location').textContent = disasterInfo.location;
    document.getElementById('disaster-type').textContent = disasterInfo.type;
    document.getElementById('disaster-distance').textContent = disasterInfo.distance;

    function updateCurrentTime() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        document.getElementById('current-time').textContent = `${hours}:${minutes}`;
    }
    updateCurrentTime();
    setInterval(updateCurrentTime, 60000);

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            const userLat = position.coords.latitude;
            const userLng = position.coords.longitude;
            const map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(userLat, userLng),
                zoom: 13
            });

            // 현재 위치 마커
            const userMarker = new naver.maps.Marker({
                position: new naver.maps.LatLng(userLat, userLng),
                map: map,
                icon: { content: '<div class="info-window">📍 현재 위치</div>' }
            });

            // 재난 위치 마커
            const disasterLatLng = new naver.maps.LatLng(disasterInfo.coordinates.lat, disasterInfo.coordinates.lng);
            const disasterMarker = new naver.maps.Marker({
                position: disasterLatLng,
                map: map,
                icon: { content: '<div class="info-window" style="background: rgba(255,59,48,0.1); border-color: rgba(255,59,48,0.5);">⚠️ 지진 지점</div>' }
            });

            // 위험 반경
            new naver.maps.Circle({
                map: map,
                center: disasterLatLng,
                radius: disasterInfo.radius,
                strokeColor: '#FF3B30',
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: '#FF3B30',
                fillOpacity: 0.15
            });

            // 지도 범위 조정
            const bounds = new naver.maps.LatLngBounds();
            bounds.extend(disasterLatLng);
            bounds.extend(new naver.maps.LatLng(userLat, userLng));
            map.fitBounds(bounds);

            document.querySelector('.status').textContent = '✨ 가장 거리가 가까워진 대피소를 검색 하여 보여줍니다...';

            // 네이버 장소 API 또는 외부 shelter 위치 fetch 사용 가능
        });
    }
</script>
</body>
</html>